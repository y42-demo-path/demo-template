version: 2

sources:
  - name: raw_space_fuel_shop
    config:
      y42_source:
        type: source-postgres
        connection: Postgres Space Fuel Shop
      y42:
        apiVersion: v1
    meta:
      experts:
        users:
          - rob.dewit@y42.com
    tables:
      - name: public_payments
        config:
          y42_table:
            import: payments
            columns:
              - payment_status
              - amount_total
              - id
              - order_id
              - payment_method
            group: public
            supported_sync_modes:
              - full_refresh
              - incremental
            default_cursor_field: []
            source_defined_primary_key:
              - - id
        columns:
          - name: amount_total
            data_type: INTEGER
            description: The total order amount in euro cents
          - name: id
            data_type: STRING
            description: Unique ID for the payment. There should be only one payment per
              order.
          - name: order_id
            data_type: STRING
            description: Unique ID for the customer; primary key in the customers table
          - name: payment_method
            data_type: STRING
            description: The method used to make the payment
          - name: payment_status
            data_type: STRING
            description: Whether or not the payment came through properly; can be ACCEPTED,
              DECLINED, or CANCELLED
      - name: public_orders
        config:
          y42_table:
            import: orders
            columns:
              - service_station
              - updated_at
              - fulfillment_method
              - id
              - line_items
              - customer_id
              - status
            group: public
            supported_sync_modes:
              - full_refresh
              - incremental
            default_cursor_field: []
            source_defined_primary_key:
              - - id
        columns:
          - name: customer_id
            data_type: STRING
            description: Unique ID for the customer; primary key in the customers table
          - name: fulfillment_method
            data_type: STRING
            description: How the order was fulfilled; either SELF_SERVICE or SERVICED by an
              employee
          - name: id
            data_type: STRING
            description: Unique ID for the order
          - name: line_items
            data_type: STRING
            description: JSON list of items in the order. Contains product name, category,
              and price
          - name: service_station
            data_type: STRING
            description: Planet name of the service station where the order was placed
          - name: status
            data_type: STRING
            description: "Status of the order. 0 for cancelled, 1 for declined, 2 for
              accepted"
          - name: updated_at
            data_type: TIMESTAMP
            description: Time at which the order was published to the database in CET
      - name: public_customers
        config:
          y42_table:
            import: customers
            columns:
              - last_name
              - id
              - first_name
            group: public
            supported_sync_modes:
              - full_refresh
              - incremental
            default_cursor_field: []
            source_defined_primary_key:
              - - id
        columns:
          - name: first_name
            data_type: STRING
            description: First name of the customer
          - name: id
            data_type: STRING
            description: "Unique ID for the customer"
          - name: last_name
            data_type: STRING
            description: Last name of the customer
